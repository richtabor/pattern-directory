import*as e from"@wordpress/interactivity";var t={d:(e,r)=>{for(var i in r)t.o(r,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:r[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const r=(n={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store,withScope:()=>e.withScope},d={},t.d(d,n),d),{actions:i,state:o}=(0,r.store)("wporg/patterns/preview",{state:{get scale(){const{pageWidth:e,previewWidth:t}=(0,r.getContext)(),i=parseInt(e,10)/t;return i>1?1:i},get previewHeightCSS(){return`${(0,r.getContext)().previewHeight}px`},get iframeWidthCSS(){return`${(0,r.getContext)().previewWidth}px`},get iframeHeightCSS(){return(0,r.getContext)().previewHeight/o.scale+"px"},get transformCSS(){return`scale(${o.scale})`},get isWidthWide(){return(0,r.getContext)().previewWidth>=1200},get isWidthMedium(){return(0,r.getContext)().previewWidth>=800&&(0,r.getContext)().previewWidth<1200},get isWidthNarrow(){return(0,r.getContext)().previewWidth<800},dragPos:0,isDrag:!1,throttleTimeout:0,prevX:0,direction:""},actions:{updatePreviewWidth(e){const t=(0,r.getContext)();e>320&&e<1400&&(t.previewWidth=e)},onWidthChange(){const{ref:e}=(0,r.getElement)();(0,r.getContext)().previewWidth=parseInt(e.dataset.width,10),setTimeout((0,r.withScope)((()=>i.handleOnResize())),0)},onLeftKeyDown(e){const t=(0,r.getContext)();"ArrowLeft"===e.code?i.updatePreviewWidth(t.previewWidth+20):"ArrowRight"===e.code&&i.updatePreviewWidth(t.previewWidth-20)},onRightKeyDown(e){const t=(0,r.getContext)();"ArrowRight"===e.code?i.updatePreviewWidth(t.previewWidth+20):"ArrowLeft"===e.code&&i.updatePreviewWidth(t.previewWidth-20)},onDragStart(e){const{ref:t}=(0,r.getElement)();o.isDrag=!0,o.prevX=e.x,o.direction=t.dataset.direction,o.dragPos=(0,r.getContext)().previewWidth},onDrag(e){if(!o.isDrag)return;const t=e.x-o.prevX;t<0&&"left"===o.direction||t>0&&"right"===o.direction?(o.dragPos+=2*Math.abs(t),i.updatePreviewWidth(o.dragPos)):(o.dragPos-=2*Math.abs(t),i.updatePreviewWidth(o.dragPos)),i.handleOnResize(),o.prevX=e.x},onDragEnd(){o.throttleTimeout=0,o.isDrag=!1,o.direction=""},*onLoad(){const{ref:e}=(0,r.getElement)();yield new Promise((t=>{e.addEventListener("load",(()=>t()))})),i.updatePreviewHeight()},updatePreviewHeight(){const e=(0,r.getContext)(),{ref:t}=(0,r.getElement)();if(e.isControlled)return void(e.previewHeight=600);e.previewWidth;const i=t.contentDocument,n=i.querySelector(".entry-content")?.clientHeight;n&&(e.previewHeight=n*o.scale)},handleOnResize(){const e=(0,r.getContext)(),{ref:t}=(0,r.getElement)(),i=t.closest(".wp-block-wporg-pattern-view-control")||t.closest(".wp-block-wporg-pattern-preview");if(i){const t=i.querySelector(".wp-block-wporg-pattern-preview__container");e.pageWidth=t?.clientWidth}}}});var n,d;